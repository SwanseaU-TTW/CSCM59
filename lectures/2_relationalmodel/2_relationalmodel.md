---
title: The relational model
date: 6 Oct, 2020
author: Thomas Torsney-Weir
modcode: CSCM59
modname: Relational and Object-Oriented Database Systems
theme: ttw
slideNumber: true
---

## What is the structure of data?

> * Text? (unstructured)
> * Trees?
> * Tables?
> * Networks?
> * Objects?
> * Records?
> * What else?

::: notes

It turns out people in the 60s were trying to figure this out!

:::

## Relational

::::::::: {.columns}

::: {.column}
* Proposed in 1969 by Edgar F. Codd
* Fundamental data type is a *relation* (table) which is a set of tuples
* Elements in *tuple* (row) are named not ordered
* Includes set of operators on relations
* **First implementations**
    - 1974: IBM System R (research database)
    - 1976: Multics Relational Data Store
    - 1979: Oracle
* SQL is a practical implementation of the relational concept
:::

::: {.column}

![Edgar F. Codd](images/ef_codd.png){height=280px}

> Moreover, I believe that the days of monstrous programming languages 
> are numbered, and that the future lies with specialized sublanguages
> that can inter-communicate with one another. 

:::

:::::::::

## Why relational

* The Relational Model is an abstract theory of data based on sound 
  mathematics (mainly set theory and predicate logic).

Relation 
  : - mathematically, is a set of tuples of attribute:value pairs
  : - e.g. $\text{S} \left( \text{A}1:\text{D}1 \text{A}2:\text{D}2 \ldots \text{A}m:\text{D}m \right)$
  : - can be thought of as a table

::::::::: {.columns}

::: {.column}
![](images/dept_table.svg)
:::

::: {.column}
![](images/emp_table.svg)
:::

:::::::::

Codd, Edgar F. *The relational model for database management: version 2*. Addison-Wesley Longman Publishing Co., Inc., 1990.

::: notes
The departments-Employees database contains two relations.
A is attributes, D is domain (datatype)
:::

## Relational model aspects

1.  every relation is a set
2.  not every set is a relation
3.  every relation can be perceived as a table
4.  not every table is a correct perception of a relation

::: notes
e.g. duplicate rows in table not actually possible
:::

## Relational model aspects

* **Structural** 
    - The data is perceived by the user as tables, and nothing but tables.
* **Manipulation** 
     - A set of operators available to the user to allow him to manipulate the tables.
* **Integrity** 
     - These tables satisfy integrity constraints.

## Structural

* **Department**

    ![](images/dept_table.svg)

* **Employee**

    ![](images/emp_table.svg)

## Manipulation

Three fundamental operators

1. Restrict
2. Project
3. Join

## Restrict

```Department WHERE Budget >= 10M```

![](images/restrict.svg)

## Project

```Department{Dept#,Budget}```

![](images/project.svg)

## Join

```Department JOIN Employee OVER Dept```

![](images/join.svg)

## Relational expressions

![](images/join.svg)

::: notes
Output from each expression is a table
:::

## Relational expressions

```(Department JOIN Employee OVER Dept) WHERE Salary <= 40K```

![](images/join_restrict.svg)

::: notes
Output from one expression can form input to another
:::

## Relational expressions

* Output from each expression is a table
* Output from one expression can form input to another
* Relational expressions can be nested
    - i.e. operands can be relational expressions

## Optimisation

* Creating tables is expensive
* Tables not necessarily materialised
* For performance reasons try not to materialised result

```(Department JOIN Employee OVER Dept) WHERE Salary <= 40K```

. . .

Materialised Evaluation
  : - Run a part of the query and store the result on disk as a table
  : - Next operation of the query runs on this part
  : - Lower memory usage but slower

. . .

Pipelined Evaluation
  : - Run next part of the query as rows are generated by first
  : - Higher memory usage but faster

## Optimisation

* Relational languages are **declarative** languages
* The query optimizer is vital!

## Two types of languages

::::::::: {.columns}

::: {.column}
* **Procedural**
    - Series of steps
    - Interpreter
    - Need to ensure steps produce result
:::

::: {.column}
* **Declarative**
    - Describe what you want
    - Interpreter figures out the steps
    - Optimiser is very important!
    - Less code $\approx$ more productive
:::

:::::::::

## Two types of languages

![mmmmm](images/burger.png){height=150px}

::::::::: {.columns}

::: {.column}
* **Procedural**
    1. Cook beef patty
    2. Toast buns
    3. Put cheese on patty
    4. Take patty off pan and place on bottom bun
    5. Put top bun on patty/cheese combo
:::

::: {.column}
* **Declarative**
    - Cooked meat
    - Melted cheese
    - Toasted buns
    - Patty on bottom bun
    - Cheese on patty
    - Top bun on top
:::

:::::::::

## Optimisation

![](images/optimizer_overview.svg)

## Optimisation

![](images/optimizer_detail.svg)

## Integrity

How to ensure data is well-formed?

![](images/integ_types.svg)

Data types enforce proper format (e.g. integer)

## Integrity

How to ensure data is well-formed?

![](images/integ_pks.svg)

**Primary keys** enforce unique identifiers

Primary key
  : Minimum combination of one or more colums that uniquely identifies a row

## Integrity

How to ensure data is well-formed?

![](images/integ_fks.svg)

**Foreign keys** enforce values exist in other tables

Foreign key
  : A primary key from elsewhere in the database used to refer to the 
    row corresponding to that primary key

## The catalogue

* Database systems must keep details of tables, columns, rows, etc
* In relational systems the catalogue itself is a *relational variable*

* **Table**

    ![](images/catalog_table.svg)

* **Column**

    ![](images/catalog_column.svg)

## Interrogating catalogue

What columns does relation variable contain?
`(Column where TableName = ‘Dept’){Column}`

Which relation variables contain a column called Emp#?
`(Column where ColumnName = ‘Emp#’){TableName}`

## Relational variables (RVs)

Base RV 
  : A relation that actually exists
  : e.g.  `Create table Emp()`

Derived RV (View) 
  : The value returned by a Relational Expression 
  : e.g.  `(Create view TopEmp where salary > ’33K’){Emp#, EName, Salary}`

**NOTE**: View is not actually carried out, just stored in the catalogue and
evaluated in actual time. If the original data is altered then the view will
reflect that change.

Transparent to viewer. Can carry out operations on views just as on tables. Data in view altered is reflected in original data.

View is a window into a specified portion of a relation.

## Summary

* Relational model
    - Definition of relation
    - Set of operators for manipulating relations
* SQL is a practical implementation of the manipulation operators
* Optimization is very important

